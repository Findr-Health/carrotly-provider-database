# FINDR HEALTH - SESSION PROTOCOL
## Version 3.0 | Updated: January 13, 2026

---

## ğŸ¯ Purpose

This document ensures continuity between development sessions with Claude AI. Following this protocol prevents information loss and accelerates daily progress.

**Key Principle:** We lose track of small details. This protocol is the single source of truth for all accumulated learnings.

---

## ğŸ“‹ MASTER REFERENCE

### ğŸ”‘ Test Accounts (VERIFIED WORKING)

| Email | Password | Created | Purpose | Status |
|-------|----------|---------|---------|--------|
| gagi@findrhealth.com | Test1234! | Jan 9, 2026 | Primary test account | âœ… VERIFIED |
| tim@findrhealth.com | Test1234! | Earlier | Developer account | âœ… Works |
| test-jan12@findrhealth.com | (standard) | Jan 12, 2026 | Signup flow test | âœ… Created |

### ğŸ”— Live URLs

| Service | URL | Platform |
|---------|-----|----------|
| Backend API | https://fearless-achievement-production.up.railway.app/api | Railway |
| Provider Portal | https://findrhealth-provider.vercel.app | Vercel |
| Admin Dashboard | https://admin-findrhealth-dashboard.vercel.app | Vercel |

### ğŸ“ Canonical Paths (ONLY USE THESE)

```
~/Development/findr-health/              â† ROOT
â”œâ”€â”€ findr-start.sh                       â† Morning script
â”œâ”€â”€ findr-end.sh                         â† Evening script
â”œâ”€â”€ findr-health-mobile/                 â† Flutter consumer app
â”œâ”€â”€ carrotly-provider-database/          â† Backend + Admin Dashboard
â”œâ”€â”€ carrotly-provider-mvp/               â† Provider Portal
â””â”€â”€ docs/                                â† Shared documentation
```

### âŒ Deprecated Paths (NEVER USE)

- `~/Downloads/findr_health_app` - DELETED Jan 12
- `~/Downloads/Findr_health_APP` - DELETED Jan 12
- `~/Downloads/findr_health_flutter` - DELETED Jan 12
- `~/Downloads/findr-health-mobile` - DELETED Jan 12
- `~/Desktop/carrotly-*` - Use ~/Development instead

### ğŸ” SSH Key Configuration

```bash
# Key location
~/.ssh/id_ed25519_findr

# âš ï¸ IMPORTANT: Key expires when terminal closes!
# Run this EVERY session:
ssh-add ~/.ssh/id_ed25519_findr

# Test connection:
ssh -T git@github.com
# Should say: "Hi wetherillt-punch! You've successfully authenticated"
```

---

## ğŸŒ… START OF DAY PROCEDURE

### Step 1: Run Morning Script
```bash
cd ~/Development/findr-health
./findr-start.sh
```

### Step 2: Re-add SSH Key (Required Every Session!)
```bash
ssh-add ~/.ssh/id_ed25519_findr
```

### Step 3: Copy Generated Prompt
The script generates a Claude-ready prompt. Copy it.

### Step 4: Attach Documents
Always attach the latest versions:
1. `OUTSTANDING_ISSUES_v[latest].md`
2. `SESSION_END_[previous-date].md` (if relevant)
3. Any specific files for today's work

### Step 5: Verify Claude Has Context
Claude should summarize current state before starting work.

---

## ğŸ“ START OF DAY PROMPT TEMPLATE

```markdown
# FINDR HEALTH - Session Start: [DATE]

## ğŸ‘¤ Context
I'm Tim, continuing development on Findr Health. This is a healthcare marketplace with:
- Flutter consumer app (iOS/Android)
- Node.js/MongoDB backend on Railway
- React provider portal and admin dashboard on Vercel

## ğŸ”‘ Quick Reference
- **Test Account:** gagi@findrhealth.com / Test1234!
- **Backend API:** https://fearless-achievement-production.up.railway.app/api
- **Provider Portal:** https://findrhealth-provider.vercel.app
- **Admin Dashboard:** https://admin-findrhealth-dashboard.vercel.app

## ğŸ“¦ Git State (run `git log -1 --oneline` in each repo)
| Repo | Branch | Last Commit |
|------|--------|-------------|
| findr-health-mobile | main | [COMMIT] |
| carrotly-provider-database | main | [COMMIT] |
| carrotly-provider-mvp | main | [COMMIT] |

## ğŸ¯ Today's Goals (Priority Order)
1. [ ] [GOAL 1]
2. [ ] [GOAL 2]
3. [ ] [GOAL 3]

## ğŸš¨ Known Blockers
- [List any blockers from previous session]

## ğŸ“ Attached Documents
- OUTSTANDING_ISSUES_v[X].md
- [Any specific files needed today]

## â“ Questions for Claude
1. [Any specific questions]

Please review the attached documents and confirm you understand the current state before we begin.
```

---

## ğŸŒ™ END OF DAY PROCEDURE

### Step 1: Run Evening Script
```bash
cd ~/Development/findr-health
./findr-end.sh
```

### Step 2: Generate Session Summary
Copy the prompt generated by the script and paste into Claude.

### Step 3: Download and Save
- Save `SESSION_END_[DATE].md` to `docs/sessions/`
- Save `OUTSTANDING_ISSUES_v[N+1].md` to project

### Step 4: Commit Documentation
```bash
cd ~/Development/findr-health/findr-health-mobile
git add -A
git commit -m "docs: end of session [DATE]"
git push origin main
```

---

## ğŸ“ END OF DAY PROMPT

```markdown
Please generate my end-of-day summary. Include:
1. **Completed Today** - List everything we accomplished
2. **Code Changes** - Files modified with brief description
3. **New Issues Discovered** - Any bugs or problems found
4. **Tomorrow's Priorities** - What should be tackled next
5. **Updated OUTSTANDING_ISSUES** - Generate new version
6. **Files to Download** - List any files I should save

Format as a downloadable SESSION_END_[DATE].md file.
```

---

## ğŸ› KNOWN ISSUES TRACKER

### CRITICAL - App Crashes on Standalone Launch
- **Status:** UNRESOLVED (discovered Jan 12)
- **Symptom:** White flash then crash when opening app from home screen
- **Works:** In Xcode debug mode
- **Fails:** When opening standalone (not attached to debugger)
- **Likely Cause:** StorageService SharedPreferences not initialized before sync getters
- **Impact:** Blocks biometric testing, TestFlight, App Store
- **Investigation:**
  ```bash
  cat lib/main.dart
  grep -n -A10 "init\|_prefs" lib/core/services/storage_service.dart
  ```

### MEDIUM - Biometric Login
- **Status:** BLOCKED by crash issue
- **Code:** Complete in splash_screen.dart
- **Settings Toggle:** Working (saves to SharedPreferences)
- **Test Flow:** Log in â†’ Enable Face ID â†’ Close app â†’ Reopen â†’ Should prompt

### RESOLVED - Terms of Service (Jan 12)
- **Issue:** Showing abbreviated 3-section version instead of full 16-section
- **Root Cause:** Two `TermsOfServiceScreen` classes existed
- **Fix:** Removed old class from `settings_screens.dart`, added correct import in `app_router.dart`

### RESOLVED - Provider Portal Popup (Jan 12)
- **Issue:** "Unsaved changes" popup appeared after successful save
- **Root Cause:** `hasChanges` not checking `justSavedRef.current`
- **Fix:** Added `&& !justSavedRef.current` to `handleCancel()` check
- **Needs:** Verification after Vercel redeploy

---

## ğŸ“š ACCUMULATED LEARNINGS

### Flutter/iOS
- `flutter clean && flutter pub get` often needed after major changes
- Delete app from device + reinstall for UI changes to appear
- `local_auth ^3.0.0` has different API than v2.x - no `options` parameter
- Xcode DerivedData cache causes stale builds: `rm -rf ~/Library/Developer/Xcode/DerivedData/*`
- Release builds require different signing than debug

### Git/SSH
- SSH key drops from agent when terminal closes
- Always run `ssh-add ~/.ssh/id_ed25519_findr` at session start
- Never use deprecated paths - they're deleted
- Commit frequently to avoid lost work

### File Editing
- Multiple `sed` commands can corrupt files - prefer complete file replacement
- Always verify changes with `grep` or `cat` before building
- Check for duplicate classes/imports when features don't work

### Testing
- Test on device, not simulator, for biometric features
- Hot reload doesn't work for major changes - need full rebuild
- Debug mode behaves differently than release mode

---

## ğŸ”„ VERSION HISTORY

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | Jan 10, 2026 | Initial protocol |
| 2.0 | Jan 12, 2026 | Added git migration, SSH, canonical paths |
| 3.0 | Jan 13, 2026 | Added test accounts, known issues tracker, accumulated learnings |

### Document Versions (Current)
| Document | Current Version |
|----------|-----------------|
| SESSION_PROTOCOL | v3 |
| OUTSTANDING_ISSUES | v9 |
| ECOSYSTEM_SUMMARY | v7 |

---

## ğŸš¨ EMERGENCY RECOVERY

### SSH Permission Denied
```bash
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519_findr
ssh -T git@github.com
```

### Git Repo Corrupted
```bash
cd ~/Development/findr-health
rm -rf [repo-name]
git clone git@github.com:Findr-Health/[repo-name].git
```

### Flutter Build Fails
```bash
cd ~/Development/findr-health/findr-health-mobile
flutter clean
rm -rf ios/Pods ios/Podfile.lock ios/.symlinks
rm -rf ~/Library/Developer/Xcode/DerivedData/*
cd ios && pod install --repo-update && cd ..
flutter pub get
flutter run
```

### App Shows Stale Content
1. Delete app from iPhone (hold icon â†’ Remove App)
2. Run `flutter clean && flutter pub get`
3. Run `flutter run`

---

## âš¡ QUICK COMMANDS

| Task | Command |
|------|---------|
| Start day | `cd ~/Development/findr-health && ./findr-start.sh` |
| Add SSH key | `ssh-add ~/.ssh/id_ed25519_findr` |
| End day | `cd ~/Development/findr-health && ./findr-end.sh` |
| Run Flutter | `cd ~/Development/findr-health/findr-health-mobile && flutter run` |
| Check git | `git status && git log -1 --oneline` |
| Commit | `git add -A && git commit -m "type(scope): msg"` |
| Push | `git push origin main` |
| Clean build | `flutter clean && flutter pub get && flutter run` |

---

## ğŸ“ ESCALATION

If you get stuck:
1. Share exact error messages
2. Share `git status` output
3. Share relevant file contents (use `cat` or `grep`)
4. Describe what you expected vs what happened

---

*Protocol Version: 3.0 - January 13, 2026*
*Replaces: SESSION_PROTOCOL_v2.md*
